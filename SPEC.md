# Спецификация

- [Спецификация](#%D0%A1%D0%BF%D0%B5%D1%86%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F)
  - [Описание](#%D0%9E%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5)
  - [Функционал](#%D0%A4%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%BE%D0%BD%D0%B0%D0%BB)
    - [Аспект "Доска задач"](#%D0%90%D1%81%D0%BF%D0%B5%D0%BA%D1%82-%22%D0%94%D0%BE%D1%81%D0%BA%D0%B0-%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%22)
      - [Описание](#%D0%9E%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-1)
      - [Сущности](#%D0%A1%D1%83%D1%89%D0%BD%D0%BE%D1%81%D1%82%D0%B8)
      - [Прецеденты](#%D0%9F%D1%80%D0%B5%D1%86%D0%B5%D0%B4%D0%B5%D0%BD%D1%82%D1%8B)
    - [Аспект "Методология канбан"](#%D0%90%D1%81%D0%BF%D0%B5%D0%BA%D1%82-%22%D0%9C%D0%B5%D1%82%D0%BE%D0%B4%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D1%8F-%D0%BA%D0%B0%D0%BD%D0%B1%D0%B0%D0%BD%22)
      - [Описание](#%D0%9E%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-2)
      - [Сущности](#%D0%A1%D1%83%D1%89%D0%BD%D0%BE%D1%81%D1%82%D0%B8-1)
      - [Прецеденты](#%D0%9F%D1%80%D0%B5%D1%86%D0%B5%D0%B4%D0%B5%D0%BD%D1%82%D1%8B-1)
    - [Аспект "Аутентификации и роли"](#%D0%90%D1%81%D0%BF%D0%B5%D0%BA%D1%82-%22%D0%90%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B8-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8%22)
      - [Описание](#%D0%9E%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-3)
      - [Сущности](#%D0%A1%D1%83%D1%89%D0%BD%D0%BE%D1%81%D1%82%D0%B8-2)
      - [Прецеденты](#%D0%9F%D1%80%D0%B5%D1%86%D0%B5%D0%B4%D0%B5%D0%BD%D1%82%D1%8B-2)
- [Требования](#%D0%A2%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F)

## Описание

RESTful Сервис управления процессами проектов, основанный на принципах канбан.

## Функционал

*Примечание: Функционал поделен на осмысленные, полноценные части, названные аспектами.*

### Аспект "Доска задач"

#### Описание

**Проект** *(board)* - Тематически группирует задачи.

Проект имеет свойства: описание, иконку, дату начала проекта, и статус проекта (планируется, активный или закончен), и дату окончания проекта. А также **участников** *(members)* проекта, которые разделены по ролям в проекта: 

* *Менеджер* *(manager)* - создает проект/задачи/фазы, имеет полные права на редактирование проекта/задач/фаз, а также приглашает/принимает участников в проект, **управляет ролями участников проекта**.
* *Участник* *(member)* - имеет возможность продвигать задачи.

Роли участников проекта представляют собой локальную систему прав, внутри проекта, названую возможностями *(может)*. Участников проекта можно назначать на задачи проекта. Пользователь может отправить запрос на вступление в проект.

**Фазы** *(column)* - Группируют задачи внутри проекта.

Могут иметь нагрузку (количество задач на фазу), и название. 

**Задачи** *(task)* - Единица процесса проекта.

Обладают именем, задают временные рамки на переход между фазами (для каждой фазы свои), такие как, дата начала, окончания. Нагрузка задачи определяется ее длительностью (независима от временных рамок). Также имеет приоритет который определяет положение задачи в столбике фазы, чем выше приоритет тем выше в столбике текущей фазы задачи. Задачи можно назначать конкретным участникам проекта.

Задачи можно продвигать через фазы(столбики) проекта для изменения их статуса. Этот процесс позволяет менять приоритет, временные рамки, и столбец(фазу) задачи. 

Задачи имеют флаг:
* Просроченные задачи - те задачи которые вышли за свои временные рамки.


#### Сущности

**Проект** *(board)* - имеет название, иконку, описание, временные рамки(опционально). Соотносится с фазами проекта и задачами проекта.

**Фаза** *(column)* - имеет название, порядок(порядок отображения в списке всех столбцов), и показатель нагрузки(количество задач на фазу).

**Задача** *(task)* - имеет название, описание, приоритет, временные рамки, и нагрузку. и текущую фазу что соотносит ее с одной из фаз проекта.

**Участник** *(member)* - имеет роль в проекте. Соотносится с одним проектом.

#### Прецеденты

*CRUD* для Проект/Задача/Фаза.

*Примечание:*

* Создавать фазы, и назначать им порядок можно только когда проект имеет статус планируется.
* Удалять задачи можно только в последней по порядку фазе.
* *Менеджер* *(manager)* может изменять статус проекта от планируется к активный и до закончен.
* Изменение статуса проекта в обратном порядке запрещается.
* Временные рамки(при их наличии) автоматические переводят проект в статус активный при наступлении даты начала, и завершается при наступлении даты конца. 
* Создатель (для него создается первый участник) проекта автоматический назначается участником этого проекта с ролью Менеджер (manager)

**Назначение** *(assign)* - Назначает **участников** *(members)* проекта на задачи.

*Принадлежит:*

* **Задача** *(task)*

*Может выполнять:*

* *Менеджер* *(manager)*

**Продвижение** *(promot)* - переносит задачу из текущей фазы в другую фазу, опционально задает новые сроки и приоритет.

*Примечание:*

* Продвижение задач в проектах со статусом отличном от активный запрещается.
* Продвижение задач чья дата(если имеются временные рамки) начала еще не наступила запрещается.

*Принадлежит:*

* **Задача** *(task)* 

*Может выполнять:*

* **Участник** *(member)*  проекта если задача не назначена никому
* Назначенный **Участник** *(member)* на задачу
* *Менеджер* *(manager)* в любом случае

### Аспект "Методология канбан"

*Примечание: зависим от аспекта "Доска задач"*

#### Описание

Наделяет фазы свойством максимальной нагрузки, и задает ограничивающие правило для продвижения.

#### Сущности

**Расширение Фазы**

Наделяет фазы:

* Полем максимальная нагрузка (maxOverflow).
* Флагом перегруженные фаза (вычисляемое  isOverflow) - те фазы число задач в которых стало равно максимальной нагрузки фазы.

#### Прецеденты

**Дополняет Продвижение**

Дополняет продвижение задачи, возможностью изменить максимальную нагрузку. 

*Примечание: Продвижение задачи в обратном порядке, либо в перегруженную фазу запрещается.*

### Аспект "Аутентификации и роли"

*Примечание: зависим от аспекта "Доска задач"*

#### Описание

Определяет права и возможности пользователей.

#### Сущности

**Пользователь** - пользователь в системе с ролями определяющими его права и возможности.

**Роли пользователей**

* *Пользователь* *(user)* - может создавать\удалять\редактировать свои проекты. Может просматривать **только** описание и статус других проектов.
* *Модератор* *(moder)* - обладает правами пользователя и может **редактировать** \ **просматривать** любые проекты, а также имеет роль *Менеджер* *(manager)* для любого проекта
* *Администратор* *(admin)* - имеет полные права.

*Примечание: Создатель проекта автоматический назначается участником этого проекта с ролью Менеджер (manager)*

#### Прецеденты

**Назначение участником проекта** *(assign)* - связывает пользователя с участником (создает участника для пользователя) конкретного проекта

*Принадлежит:*

* **Проект** *(board)*

*Может выполнять:*

* *Менеджер* *(manager)*

*Примечание: доступно только для пользователей обладающих ролью Менеджер (manager) в проекте (через сущность участник либо для модераторов)*

~~Регистрация пользователей~~

# Требования

1. RESTful сервис поверх модели данных
2. СУБД Postgres
3. Средство сборки gradle
4. Язык разработки Kotlin, платформа JVM 11
5. Артефакт запускаемый на ОС семейства Linux
